<html>

<head>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="https://d3js.org/topojson.v3.min.js"></script>
  <style>
    .state {
      fill: none;
    }
  </style>
</head>

<body>
  <p>
    <svg id="choropleth" height="800" width="1000" style="margin:20px"></svg>
    <script>

      const svg = d3.select("#choropleth");
      const width = svg.attr("width");
      const height = svg.attr("height");
      const margin = { top: 20, right: 20, bottom: 20, left: 20 };
      const mapWidth = width - margin.left - margin.right;
      const mapHeight = height - margin.top - margin.bottom;
      const map = svg.append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      const projection = d3.geoNaturalEarth1();
      const pathGenerator = d3.geoPath().projection(projection);

      svg.append('path')
        .attr('class', 'sphere')
        .attr('d', pathGenerator({ type: 'Sphere' }));


      d3.json('https://unpkg.com/world-atlas@1.1.4/world/110m.json')
        .then(data => {

          const countries = topojson.feature(data, data.objects.countries);

          svg.selectAll('path').data(countries.features)
            .enter().append('path')
            .attr('class', 'country')
            .attr('d', pathGenerator)
            .attr("fill", "white");
        });


      const requestData = async function () {

        const dev = await d3.csv("vg_dev.csv");
        const sales = await d3.csv("vg_sales.csv");

        console.log(dev)
        console.log(sales)



      };

      requestData();

    </script>
  </p>

</body>

</html>